# BLOG MANGAS/ANIMES

## PRESENTATION

Mon application de blog d√©di√©e au manga et √† l‚Äôanime s‚Äôadresse avant tout aux passionn√©s de culture japonaise, qu‚Äôils soient lecteurs assidus de mangas, amateurs d‚Äôanimes, ou simples curieux souhaitant d√©couvrir cet univers foisonnant. Elle vise aussi bien les fans exp√©riment√©s, d√©sireux de partager leurs avis et d√©couvertes, que les n√©ophytes √† la recherche de recommandations fiables et d‚Äôinformations claires sur les ≈ìuvres incontournables du moment.

Cette plateforme r√©pond √† plusieurs probl√©matiques majeures rencontr√©es par la communaut√©. D‚Äôune part, elle centralise l‚Äôinformation : il n‚Äôest plus n√©cessaire de naviguer entre diff√©rents sites pour trouver des critiques, des classements, des r√©sum√©s ou des actualit√©s sur les derni√®res sorties. D‚Äôautre part, elle facilite l‚Äôinteraction et l‚Äô√©change entre membres gr√¢ce √† des syst√®mes de commentaires, de notations et de recommandations personnalis√©es, permettant √† chacun de partager ses coups de c≈ìur ou de d√©battre autour de ses s√©ries pr√©f√©r√©es. Enfin, elle aide les utilisateurs √† organiser leur parcours de lecture ou de visionnage gr√¢ce √† des outils de suivi (progression, listes d‚Äôenvies, notifications sur les nouveaut√©s), √©vitant ainsi d‚Äôoublier o√π ils en sont dans leurs s√©ries ou de passer √† c√¥t√© de titres majeurs.

L‚Äôutilisation de l‚Äôapplication est simple et intuitive. Apr√®s inscription, chaque membre peut explorer la biblioth√®que de mangas et d‚Äôanimes, consulter des fiches d√©taill√©es, lire ou r√©diger des critiques, noter les ≈ìuvres et interagir avec la communaut√©. Un moteur de recherche avanc√© et des filtres par genre, popularit√© ou nouveaut√© facilitent la d√©couverte de nouvelles s√©ries adapt√©es √† ses go√ªts. Les cr√©ateurs de contenu peuvent √©galement publier leurs propres articles, analyses ou recommandations, enrichissant ainsi la base de connaissances partag√©e.

Mon int√©r√™t pour ce projet est avant tout n√© de ma passion pour la culture manga et anime, mais aussi de l‚Äôenvie de cr√©er un espace convivial et riche pour une communaut√© souvent dispers√©e. Je souhaite offrir un outil qui valorise la d√©couverte, l‚Äô√©change et la cr√©ativit√©, tout en mettant en avant la diversit√© et la richesse de cet univers. Ce projet est aussi l‚Äôoccasion de d√©velopper mes comp√©tences techniques et √©ditoriales, tout en contribuant √† la promotion d‚Äôune culture qui me tient √† c≈ìur.

## USER STORIES

* En tant qu‚Äôadmin, je souhaite pouvoir valider, modifier ou supprimer les articles et critiques publi√©s par les utilisateurs afin de garantir la qualit√© et la pertinence des contenus sur le blog.
* En tant qu‚Äôadmin, je souhaite pouvoir mod√©rer, √©diter ou supprimer les commentaires inappropri√©s afin de maintenir un espace de discussion respectueux et agr√©able pour tous.
* En tant qu‚Äôadmin, je souhaite pouvoir consulter la liste des membres inscrits, modifier leurs r√¥les ou d√©sactiver des comptes afin de g√©rer efficacement la communaut√© et pr√©venir les abus.
* En tant qu‚Äôadmin, je souhaite pouvoir publier des actualit√©s ou annonces importantes sur la page d‚Äôaccueil afin de tenir la communaut√© inform√©e des nouveaut√©s ou √©v√©nements √† venir.
* En tant qu‚Äôadmin, je souhaite recevoir et traiter les signalements d‚Äôabus ou de contenus inappropri√©s afin de r√©agir rapidement et prot√©ger la communaut√©.
* En tant qu‚Äôadmin, je souhaite pouvoir cr√©er, modifier ou supprimer des cat√©gories et des tags afin d‚Äôorganiser efficacement les contenus et faciliter la navigation des utilisateurs.
* En tant qu'utilisateur je souhaite m'inscrire afin d'acceder √† l'application de blog d'√©di√©e au mangas et √† l'anim√©
* En tant que nouvel utilisateur passionn√© de manga, je veux pouvoir consulter facilement les critiques et classements des derniers mangas et animes afin de d√©couvrir de nouvelles ≈ìuvres √† lire ou √† regarder
* En tant que membre inscrit, je veux pouvoir r√©diger et publier des critiques sur les mangas et animes que j‚Äôai vus afin de partager mon opinion avec la communaut√©.
* En tant qu‚Äôutilisateur, je veux commenter les articles et critiques des autres membres afin d‚Äô√©changer des avis et d√©battre sur mes s√©ries pr√©f√©r√©es.
* En tant qu‚Äôutilisateur r√©gulier, je veux pouvoir ajouter des mangas et animes √† une liste de suivi afin de ne pas oublier o√π j‚Äôen suis dans mes lectures ou visionnages.
* En tant qu‚Äôutilisateur, je veux recevoir des recommandations personnalis√©es bas√©es sur mes go√ªts et mes √©valuations afin de d√©couvrir des titres qui pourraient me plaire.
* En tant qu‚Äôutilisateur, je veux pouvoir filtrer les mangas et animes par genre, popularit√© ou date de sortie afin de trouver rapidement ce qui m‚Äôint√©resse.
* En tant que membre, je veux pouvoir personnaliser mon profil avec un avatar et une biographie afin de mieux me pr√©senter √† la communaut√©.
* En tant qu‚Äôutilisateur, je veux √™tre notifi√© lorsqu‚Äôun nouvel article ou une nouvelle critique est publi√©e sur une s√©rie que je suis afin de rester inform√© des derni√®res actualit√©s.

## Liste prioris√©e de user stories

| Priorit√© | R√¥le                 | Action                                                                 | B√©n√©fice                                                             |
| :-------: | --------------------- | ---------------------------------------------------------------------- | ---------------------------------------------------------------------- |
|     1     | Visiteur              | Consulter la liste des articles                                        | D√©couvrir rapidement le contenu disponible                            |
|     2     | Visiteur              | Lire un article d√©taill√©                                             | Approfondir un sujet d‚Äôint√©r√™t                                      |
|     3     | Utilisateur           | S‚Äôinscrire / se connecter                                             | Participer (commentaires) et acc√©der aux fonctionnalit√©s prot√©g√©es |
|     4     | Utilisateur connect√© | Poster un commentaire                                                  | Partager son avis et √©changer                                         |
|     5     | Utilisateur connect√© | √âditer ou supprimer son propre commentaire                            | G√©rer et corriger son contenu                                         |
|     6     | Administrateur        | Cr√©er / supprimer un article via EasyAdmin                            | G√©rer le contenu du blog de mani√®re structur√©e                      |
|     7     | Administrateur        | G√©rer (activer/d√©sactiver) et mod√©rer les commentaires              | Maintenir un espace de discussion respectueux des CGU                  |
|     8     | Administrateur        | G√©rer les utilisateurs (r√¥les, blocage)                              | Contr√¥ler l‚Äôacc√®s et la s√©curit√© du site                          |
|     9     | Administrateur        | Configurer les blocs dynamiques du front (header, footer, sidebar)     | Personnaliser la mise en page sans recoder                             |
|    10    | Administrateur        | Consulter des statistiques basiques (nombre d‚Äôarticles, commentaires) | Suivre l‚Äôactivit√© du site                                            |

### Services

## üìò Models (Database/Class Diagram)

```mermaid
classDiagram
    class User {
        +int id
        +string username
        +string email NN
        +string password NN
        +string avatar NN
        +int warningCount NN
        +string bio
        +string role
         +DateTime createdAt NN
        +DateTime updatedAt NN
        +bool isActive NN
        +bool isBanned NN
    }

    class Article {
        +int id
        +string title NN
        +string image NN
        +string slug NN
        +string content
        +string status
        +DateTime createdAt NN
        +DateTime updatedAt NN
        +User author NN
        +Comment comments
        
    }

    class Review {
        +int id
        +string content
        +int rating NN
        +datetime createdAt NN
        +string status
    }

    class Comment {
    +int id
    +text content NN
    +DateTime createdAt NN
    +bool is_moderated NN
    +bool is_published NN
    +User author NN
    +Article article
    }

    class MangaAnime {
        +int id
        +string title NN
        +string type NN
        +date releaseDate
        +int popularity NN
        +string synopsis NN
        +string author NN
        +string studio NN
        +string coverImage NN
        +int numberOfVolumes NN
        +int numberOfEpisodes NN
    }

    class Category {
        +int id
        +string name
    }

    class Recommendation {
        +int id
        +int userId NN
        +int mangaAnimeId NN
        +int score NN
    }

    class Favori {
        +int id
        +int userId NN
        +int mangaAnimeId NN
        +datetime createdAt NN
    }

    class Block {
    +int id
    +string name NN
    +string content 
    +DateTime created_at 
    +DateTime updated_at NN
  }

    User "1" -- "0..*" Article : √©crit
    User "1" -- "0..*" Review : r√©dige
    User "1" -- "0..*" Comment : √©crit
    Article "1" -- "0..*" Comment : re√ßoit
    Review "1" -- "0..*" Comment : re√ßoit
    MangaAnime "1" -- "0..*" Review : concerne
    MangaAnime "1" -- "0..*" Category : class√©
    User "1" -- "0..*" Recommendation : re√ßoit
    MangaAnime "1" -- "0..*" Recommendation : recommand√©
    User "1" -- "0..*" Favori : ajoute
    MangaAnime "1" -- "0..*" Favori : favoris√©
    Block "*" -- "*" Article : affich√©_sur

```

## üß≠ Controllers

```mermaid
classDiagram
  class ArticleController {
    -index()
    -view()
    -create()
    -edit()
    -delete()
    -validate
  }

  class CommentController {
    -create()
    -delete()
    -report()
  }

  class SecurityController {
    -register()
    -login()
    -logout()
  }

  class UserController {
    -profile()
    -newPassword()
    -editProfile()
    -myData()
    -delete()
  }

    class ReviewController {
        +create()
        +edit()
        +delete()
        +getAll()
        +getById()
    }
    class CommentController {
        +create()
        +edit()
        +delete()
        +getAllByArticle()
        +getAllByReview()
    }
    class MangaAnimeController {
        +create()
        +edit()
        +delete()
        +getAll()
        +getById()
        +addToList()
        +filter()
    }
    class CategoryController {
        +create()
        +edit()
        +delete()
        +addTag()
        +removeTag()
        +getAll()
    }
    class RecommendationController {
        +generate()
        +getAllByUser()
        +getAllByMangaAnime()
    }
    class FavoriController {
        +add()
        +remove()
        +list()
    }

    UserController ..> User
    ArticleController ..> Article
    ReviewController ..> Review
    CommentController ..> Comment
    MangaAnimeController ..> MangaAnime
    CategoryController ..> Category
    RecommendationController ..> Recommendation
    FavoriController ..> Favori

    FavoriController ..> User
    FavoriController ..> MangaAnime
```

## üîß Services

```mermaid
classDiagram
  class EmailService {
    -sendInfoMail(string subject, string message)
    -sendLoginNotification(User user, array info)
    -sendWarning(User user, array info)
    -sendRgpdExport(User user, array info)
    -sendAccountDeletion(array info)
  }

  class ModerationService {
    -string API_KEY
    -moderate(Comment comment)
    -approve(Comment comment)
    -reject(Comment comment)
  }

  class ImageService {
    -upload(UploadedFile image)
    -compress(UploadedFile image)
    -delete(string slug)
  }

```

## Diagramme de sequence

```mermaid
sequenceDiagram
    participant U as Utilisateur
    participant SC as SecurityController
    participant US as UserService
    participant ES as EmailService

    U->>SC: register(data)
    SC->>US: register(data)
    US-->>SC: Utilisateur cr√©√©
    SC->>ES: sendInfoMail(sujet, message)
    ES-->>SC: Mail envoy√©
    SC-->>U: Confirmation inscription
```

### Create article
``` mermaid
sequenceDiagram
    participant U as Utilisateur
    participant AC as ArticleController
    participant AS as ArticleService
    participant EM as EntityManager
    participant A as Article

    U->>AC: create(title, content, image, ...)
    AC->>AS: createArticle(data)
    AS->>A: new Article(data)
    AS->>EM: persist(A)
    EM-->>AS: Article enregistr√©
    AS-->>AC: Article cr√©√©
    AC-->>U: Confirmation cr√©ation
```

### Post a comment

```mermaid
sequenceDiagram
    participant U as Utilisateur
    participant CC as CommentController
    participant MS as ModerationService
    participant CS as CommentService
    participant EM as EntityManager
    participant C as Comment

    U->>CC: create(content, articleId)
    CC->>MS: moderate(content)
    MS-->>CC: r√©sultat (OK ou rejet)
    alt Commentaire approuv√©
        CC->>CS: createComment(user, article, content)
        CS->>C: new Comment()
        CS->>EM: persist(C)
        EM-->>CS: Comment enregistr√©
        CS-->>CC: Commentaire cr√©√©
        CC-->>U: Confirmation publication
    else Commentaire rejet√©
        CC-->>U: Message d‚Äôerreur/mod√©ration
    end
```

### Moderation of comments
``` mermaid
sequenceDiagram
    participant Admin as Mod√©rateur
    participant MC as ModerationService
    participant EM as EntityManager
    participant C as Comment

    Admin->>MC: moderate(commentId)
    MC->>C: getComment(commentId)
    MC->>C: setIsModerated(true)
    MC->>EM: persist(C)
    EM-->>MC: Commentaire mod√©r√©
    MC-->>Admin: R√©sultat mod√©ration

```
### Add favori
```mermaid
sequenceDiagram
    participant U as Utilisateur
    participant FC as FavoriController
    participant FS as FavoriService
    participant EM as EntityManager
    participant F as Favori

    U->>FC: add(mangaAnimeId)
    FC->>FS: addFavori(user, mangaAnime)
    FS->>F: new Favori(user, mangaAnime)
    FS->>EM: persist(F)
    EM-->>FS: Favori enregistr√©
    FS-->>FC: Favori ajout√©
    FC-->>U: Confirmation ajout favori
```

### Tel√©versement d'un image 

``` mermaid
sequenceDiagram
    participant U as Utilisateur
    participant AC as ArticleController
    participant IS as ImageService

    U->>AC: create(image)
    AC->>IS: upload(image)
    IS-->>AC: chemin/fichier image
    AC-->>U: Article cr√©√© avec image

```