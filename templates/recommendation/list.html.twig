{# templates/recommendation/list.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}
    Recommandations
{% endblock %}

{% block body %}
<h1>Recommandations pour {{ user.username ?? 'vous' }}</h1>

{# Si un sujet manga/anime est passé (recommandations par similarité) #}
{% if subject is defined %}
    <h2>Recommandations similaires à "{{ subject.title ?? subject.name ?? 'l\'élément sélectionné' }}"</h2>
{% endif %}

{# Vérification qu'il y a des recommandations #}
{% if recommendations is empty %}
    <p>Aucune recommandation disponible pour le moment.</p>
{% else %}
    <ul class="recommendations-list">
        {% for manga in recommendations %}
            <li class="recommendation-item">
                <h3>{{ manga.title ?? manga.name }}</h3>
                {# Si tu as un champ image (ajuste selon ta structure d’entité) #}
                {% if manga.image %}
                    <img src="{{ asset('medias/images/' ~ manga.coverImage) }}" alt="{{ manga.title ?? manga.name }}" style="max-width: 200px;">
                {% endif %}
                <p>{{ manga.description|default('Pas de description disponible.')|slice(0, 150) }}...</p>
                <a href="{{ path('manga_show', {'id': manga.id}) }}">Voir plus</a>
            </li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
